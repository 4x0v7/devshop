<?php

/**
 * @file devshop_projects.module
 * a module in the DevShop module group which enables the user to create 
 * proects and group sites/platforms into project groups.
 */

include_once('devshop_projects.form.inc');
include_once('devshop_projects.node.inc');
include_once('devshop_projects.task.inc');

/**
 * Implementation of hook_perm()
 */
function devshop_projects_perm() {
  return array(
    'view projects',
  );
}

/**
 * Implementation of hook_menu()
 */
function devshop_projects_menu() {

  $items['hosting/projects'] = array(
    'title' => 'Projects',
    'description' => 'Display a list of all projects',
    'page callback' => 'devshop_projects_projects_view',
    'access arguments' => array('view projects'),
  );

  $items['hosting/projects/platform/create/%'] = array(
    'title' => 'Create and add a platform',
    'description' => 'Create and add a platform to an existing project',
    //'page callback' => 'devshop_projects_platform_create',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('devshop_projects_platform_create_form', 4),
    'access arguments' => array('view projects'),
  );

  return ($items);
}

/**
 * Status display
 */
function devshop_projects_project_status(){
  
  if ($create_task_exists) {
    $msg = t('Git Cloning...');
  } elseif ($platforms_exist) {
    $msg = t('Verifying Platforms...');
  } elseif ($platforms_verified) {
    $msg = t('Platforms Verified!');
    $msg .= drupal_get_form('devshop_projects_project_site_install');
  } else {
    $msg = t('@TODO');
  }
  
  return $msg;
}

